version: 1
frontend:
  phases:
    preBuild:
      commands:
        - "# Install required dependencies"
        - "# jq is to create a proper parameters.json file"
        - amazon-linux-extras enable golang1.11
        - yum clean metadata
        - yum -y install golang jq
        - rm -rf node_modules/
        - npm i
        - npm ci
    # IMPORTANT - Please verify your build commands
    build:
      commands: [hugo]
  artifacts:
    # IMPORTANT - Please verify your build output directory
    baseDirectory: public
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*
